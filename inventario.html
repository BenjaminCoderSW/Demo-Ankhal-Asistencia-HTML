<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario - Sistema Ankhal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navbar (igual que otras páginas) -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-box-seam"></i> ANKHAL - Sistema de Inventario
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="bases.html"><i class="bi bi-building"></i> Bases/Plantas</a></li>
                    <li class="nav-item"><a class="nav-link" href="materiales.html"><i class="bi bi-box"></i> Materiales</a></li>
                    <li class="nav-item"><a class="nav-link" href="productos.html"><i class="bi bi-grid-3x3-gap"></i> Productos</a></li>
                    <li class="nav-item"><a class="nav-link active" href="inventario.html"><i class="bi bi-clipboard-data"></i> Inventario</a></li>
                    <li class="nav-item"><a class="nav-link" href="movimientos.html"><i class="bi bi-arrow-left-right"></i> Movimientos</a></li>
                    <li class="nav-item"><a class="nav-link" href="produccion.html"><i class="bi bi-gear"></i> Producción</a></li>
                    <li class="nav-item"><a class="nav-link" href="entregas.html"><i class="bi bi-truck"></i> Entregas</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12">
                <h2><i class="bi bi-clipboard-data"></i> Inventario - Control de Stock</h2>
            </div>
        </div>

        <!-- Resumen General -->
        <div class="row mb-4 mt-3">
            <div class="col-md-4">
                <div class="card border-primary">
                    <div class="card-body text-center">
                        <h6 class="text-muted">VALOR TOTAL INVENTARIO</h6>
                        <h2 class="text-primary">$2,340,000</h2>
                        <hr>
                        <div class="row">
                            <div class="col-6"><small>Materiales:</small><br><strong>$1,120,000</strong></div>
                            <div class="col-6"><small>Productos:</small><br><strong>$1,220,000</strong></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-warning">
                    <div class="card-body text-center">
                        <h6 class="text-muted">PRODUCTOS TERMINADOS</h6>
                        <h2 class="text-warning">8,450</h2>
                        <p class="mb-0">piezas totales</p>
                        <hr>
                        <div class="row">
                            <div class="col-6"><small class="text-success">Buenas:</small><br><strong>8,120</strong></div>
                            <div class="col-6"><small class="text-danger">Rechazo:</small><br><strong>330</strong></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card border-info">
                    <div class="card-body text-center">
                        <h6 class="text-muted">MATERIALES CRÍTICOS</h6>
                        <h2 class="text-danger">5</h2>
                        <p class="mb-0">requieren pedido urgente</p>
                        <hr>
                        <button class="btn btn-sm btn-outline-danger" onclick="verCriticos()">
                            <i class="bi bi-exclamation-triangle"></i> Ver Detalle
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filtros -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="filter-section">
                    <div class="row">
                        <div class="col-md-3">
                            <label class="form-label small">Base/Planta</label>
                            <select class="form-select" id="filtroBase" onchange="filtrarInventario()">
                                <option value="">Todas las bases (Consolidado)</option>
                                <option value="TULA">TULA</option>
                                <option value="WEG">WEG</option>
                                <option value="SM">SM</option>
                                <option value="ATOTO">ATOTO</option>
                                <option value="ARKAM">ARKAM</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label small">Tipo</label>
                            <select class="form-select" id="filtroTipo" onchange="filtrarInventario()">
                                <option value="">Materiales y Productos</option>
                                <option value="materiales">Solo Materiales</option>
                                <option value="productos">Solo Productos</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label small">Buscar</label>
                            <input type="text" class="form-control" id="buscarItem" placeholder="Código o nombre..." onkeyup="filtrarInventario()">
                        </div>
                        <div class="col-md-3 text-end">
                            <label class="form-label small">&nbsp;</label><br>
                            <button class="btn btn-secondary" onclick="limpiarFiltros()">Limpiar</button>
                            <button class="btn btn-success" onclick="exportarExcel()">
                                <i class="bi bi-file-earmark-excel"></i> Exportar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabla de Materiales -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="bi bi-box"></i> Inventario de Materiales</h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>Alerta</th>
                                        <th>Material</th>
                                        <th>Base TULA</th>
                                        <th>Base WEG</th>
                                        <th>Base SM</th>
                                        <th>Otras Bases</th>
                                        <th>TOTAL</th>
                                        <th>Valor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="table-danger">
                                        <td><i class="bi bi-circle-fill text-danger"></i></td>
                                        <td><strong>Clavos 3"</strong><br><small class="text-muted">MAT-001</small></td>
                                        <td>15 kg</td>
                                        <td>12 kg</td>
                                        <td>8 kg</td>
                                        <td>10 kg</td>
                                        <td><strong>45 kg</strong></td>
                                        <td>$1,575</td>
                                    </tr>
                                    <tr class="table-danger">
                                        <td><i class="bi bi-circle-fill text-danger"></i></td>
                                        <td><strong>Madera Pino 2x4</strong><br><small class="text-muted">MAT-002</small></td>
                                        <td>120 pies</td>
                                        <td>85 pies</td>
                                        <td>65 pies</td>
                                        <td>50 pies</td>
                                        <td><strong>320 pies</strong></td>
                                        <td>$4,384</td>
                                    </tr>
                                    <tr class="table-warning">
                                        <td><i class="bi bi-circle-fill text-warning"></i></td>
                                        <td><strong>Madera Encino 3x6</strong><br><small class="text-muted">MAT-006</small></td>
                                        <td>280 pies</td>
                                        <td>180 pies</td>
                                        <td>90 pies</td>
                                        <td>70 pies</td>
                                        <td><strong>620 pies</strong></td>
                                        <td>$11,470</td>
                                    </tr>
                                    <tr>
                                        <td><i class="bi bi-circle-fill text-success"></i></td>
                                        <td><strong>Madera Pino 4x6 TT</strong><br><small class="text-muted">MAT-009</small></td>
                                        <td>850 pies</td>
                                        <td>520 pies</td>
                                        <td>280 pies</td>
                                        <td>200 pies</td>
                                        <td><strong>1,850 pies</strong></td>
                                        <td>$40,700</td>
                                    </tr>
                                </tbody>
                                <tfoot class="table-secondary">
                                    <tr>
                                        <td colspan="7" class="text-end"><strong>TOTAL MATERIALES:</strong></td>
                                        <td><strong>$1,120,000</strong></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabla de Productos Terminados -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="bi bi-grid-3x3-gap"></i> Inventario de Productos Terminados</h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>Producto</th>
                                        <th>Base TULA</th>
                                        <th>Base WEG</th>
                                        <th>Otras Bases</th>
                                        <th>Buenas</th>
                                        <th>Rechazo</th>
                                        <th>TOTAL</th>
                                        <th>Valor</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Tarima 104</strong><br><small class="text-muted">Estándar 100x120</small></td>
                                        <td>320 pzas</td>
                                        <td>280 pzas</td>
                                        <td>150 pzas</td>
                                        <td><span class="badge bg-success">730</span></td>
                                        <td><span class="badge bg-danger">20</span></td>
                                        <td><strong>750 pzas</strong></td>
                                        <td>$210,000</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Tarima 125</strong><br><small class="text-muted">Industrial 120x120</small></td>
                                        <td>180 pzas</td>
                                        <td>220 pzas</td>
                                        <td>90 pzas</td>
                                        <td><span class="badge bg-success">475</span></td>
                                        <td><span class="badge bg-danger">15</span></td>
                                        <td><strong>490 pzas</strong></td>
                                        <td>$166,600</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Caja RSC-01</strong><br><small class="text-muted">40x30x30cm</small></td>
                                        <td>1,200 pzas</td>
                                        <td>850 pzas</td>
                                        <td>450 pzas</td>
                                        <td><span class="badge bg-success">2,450</span></td>
                                        <td><span class="badge bg-danger">50</span></td>
                                        <td><strong>2,500 pzas</strong></td>
                                        <td>$112,500</td>
                                    </tr>
                                </tbody>
                                <tfoot class="table-secondary">
                                    <tr>
                                        <td colspan="7" class="text-end"><strong>TOTAL PRODUCTOS:</strong></td>
                                        <td><strong>$1,220,000</strong></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        function filtrarInventario() {
            const base = document.getElementById('filtroBase').value;
            const tipo = document.getElementById('filtroTipo').value;
            const busqueda = document.getElementById('buscarItem').value;
            
            console.log('Filtrando:', base, tipo, busqueda);
            mostrarNotificacion('Aplicando filtros...', 'info');
        }
        
        function verCriticos() {
            alert('MATERIALES CRÍTICOS\n\n' +
                  '1. Clavos 3" - 45 kg (Mínimo: 100)\n' +
                  '2. Madera Pino 2x4 - 320 pies (Mínimo: 500)\n' +
                  '3. Arandelas M8 - 15 kg (Mínimo: 50)\n' +
                  '4. Cartón RSC - 120 m² (Mínimo: 300)\n' +
                  '5. Tuercas M10 - 8 kg (Mínimo: 30)\n\n' +
                  'Acción recomendada: Generar órdenes de compra');
        }
    </script>
</body>
</html>